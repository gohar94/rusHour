<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Add Form</title>
    <%- include analytics.ejs %>

    <!-- Bootstrap -->
    <link href="/stylesheets/bootstrap.css" rel="stylesheet">

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <center><h1>Admin Panel</h1></center>
    <center><div id="message"></div></center>
    <br><br>
    <div class="container">
      <div class="row">
        <div class="col-xs-6 col-sm-4">
            <center><h2>Add Service</h2></center>
            <ul id="service_reply"></ul>
            <center><form id="services">
                <input type="text" id="name" class="form-control" placeholder="Name"><br/>
                <input type="text" id="address" class="form-control" placeholder="Address"><br/>
                <input type="text" id="city" class="form-control" placeholder="City"><br/>
                <input type="text" id="lat" class="form-control" placeholder="Latitude"><br/>
                <input type="text" id="lng" class="form-control" placeholder="Longitude"><br/>
                <input type="text" id="category" class="form-control" placeholder="Category"><br/>  
                <input type="text" id="count" class="form-control" placeholder="Count"><br/>
                <input type="text" id="note" class="form-control" placeholder="Note"><br/><br/>
                <input type="button" value="Reset Form" class="btn btn-danger" onClick="this.form.reset()" />
                <input type="submit" value="Sign up" class="btn btn-success">
            </form></center>
        </div>
        <div class="col-xs-6 col-sm-4 col-md-offset-4">
            <center><h2>Add User</h2></center>
            <ul id="user_reply"></ul>
            <center><form id="users">
                <input type="text" id="nameU" class="form-control" placeholder="Name"><br/>
                <input type="text" id="fidU" class="form-control" placeholder="FacebookID"><br/>
                <input type="text" id="providerU" class="form-control" placeholder="Provider"><br/>
                <input type="text" id="usernameU" class="form-control" placeholder="Username"><br/>
                <input type="text" id="passwordU" class="form-control" placeholder="Password"><br/>  
                <input type="text" id="emailU" class="form-control" placeholder="Email"><br/> 
                <input type="text" id="phoneU" class="form-control" placeholder="Phone"><br/>
                <input type="text" id="noteU" class="form-control" placeholder="Note"><br/>  
                <select id="premiumU" required class="form-control" placeholder="Type">
                  <option value="true">Premium</option>
                  <option value="false">Basic</option>
                </select><br><br>
                <input type="button" value="Reset Form" class="btn btn-danger" onClick="this.form.reset()" />
                <input type="submit" value="Sign up" class="btn btn-success">
            </form></center>
        </div>
      </div>
      <br/><br/>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="/javascripts/bootstrap.js"></script>
    <script>
        $('form#services').submit(function(event){
            event.preventDefault();
            var name = $("#name").val();
            var address = $("#address").val();
            var city = $("#city").val();
            var category = $("#category").val();
            var lat = $("#lat").val();
            var lng = $("#lng").val();
            var count = $("#count").val();
            var note = $("#note").val();
            jQuery.support.cors = true;
            console.log("Im here");
            console.log(name + " " + address + " " + city + " " + category + " " + lat + " " + lng + " " + count + " " + note);
            $.ajax({
                url: 'http://goharirfan.me:3000/services',
                type: 'post',
                cache: true,
                dataType: 'json',
                data: {name: name, address: address, city: city, category: category, latitude: lat, longitude: lng,
                    count: count, note: note},
                success: function(data) {
                  console.log(data);
                  console.log("Post Successful!");
                  var str = name + " " + address + " " + city + " " + category + " " + lat + " " + lng + " " + count + " " + note;
                  $('#service_reply').append($('<li>').text(str));
                  console.log(str);
                  // $('#messages').append($('<li>').text("Worked like a charm!"));
                }
            });
            return false;
        });

        $('form#users').submit(function(event){
            event.preventDefault();
            var name = $("#nameU").val();
            var fid = $("#fidU").val();
            var provider = $("#providerU").val();
            var username = $("#usernameU").val();
            var password = $("#passwordU").val();
            var email = $("#emailU").val();
            var phone = $("#phoneU").val();
            var note = $("#noteU").val();
            var premium = $("#premiumU").val();
            jQuery.support.cors = true;
            console.log("Name is " + name);
            $.ajax({
                url: 'http://goharirfan.me/users',
                type: 'post',
                cache: true,
                dataType: 'json',
                data: {name: name, facebook_id: fid, provider: provider, username: username, password: password, phone: phone, email: email, note: note, premium: premium},
                success: function(data) {
                $('#user_reply').append($('<li>').text(name));
                  console.log(data);
                  console.log(name);
                }
            });
            return false;
        });
    </script>
  </body>
</html>